<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Gmail Threads</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Google Sans', 'Roboto', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            color: #202124;
            font-size: 14px;
        }

        .container {
            display: flex;
            height: 100vh;
        }

        /* Gmail Header */
        .gmail-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 64px;
            background: white;
            border-bottom: 1px solid #dadce0;
            display: flex;
            align-items: center;
            padding: 0 20px;
            z-index: 1000;
        }

        .gmail-logo {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-right: 40px;
        }

        .search-container {
            flex: 1;
            max-width: 720px;
            margin-right: 20px;
        }

        .search-box {
            width: 100%;
            height: 46px;
            background: #f1f3f4;
            border: none;
            border-radius: 24px;
            padding: 0 50px 0 20px;
            font-size: 16px;
        }

        .user-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        /* Main Layout */
        .main-layout {
            margin-top: 64px;
            display: flex;
            width: 100%;
            height: calc(100vh - 64px);
        }

        /* Sidebar */
        .sidebar {
            width: 256px;
            background: white;
            border-right: 1px solid #dadce0;
            padding: 8px;
            overflow-y: auto;
        }

        .compose-btn {
            background: #c2e7ff;
            color: #001d35;
            border: none;
            padding: 16px 24px;
            border-radius: 24px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            width: 140px;
            margin: 8px;
            box-shadow: 0 1px 2px 0 rgba(60,64,67,.3), 0 1px 3px 1px rgba(60,64,67,.15);
            transition: all 0.2s;
        }

        .compose-btn:hover {
            box-shadow: 0 1px 3px 0 rgba(60,64,67,.3), 0 4px 8px 3px rgba(60,64,67,.15);
        }

        .sidebar-menu {
            list-style: none;
            margin-top: 8px;
        }

        .sidebar-menu li {
            padding: 8px 12px;
            margin: 2px 8px;
            border-radius: 0 20px 20px 0;
            cursor: pointer;
            font-size: 14px;
            color: #202124;
            transition: background-color 0.2s;
        }

        .sidebar-menu li:hover {
            background-color: #f1f3f4;
        }

        .sidebar-menu li.active {
            background-color: #fce8e6;
            color: #d93025;
            font-weight: 500;
        }

        .count {
            float: right;
            color: #5f6368;
            font-size: 13px;
        }

        /* Content Area */
        .content-area {
            flex: 1;
            background: white;
            display: flex;
            flex-direction: column;
        }

        .inbox-header {
            padding: 12px 20px;
            border-bottom: 1px solid #dadce0;
            background: white;
        }

        .inbox-title {
            font-size: 20px;
            font-weight: 400;
            color: #202124;
            margin-bottom: 16px;
        }

        .toolbar {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 16px;
        }

        .toolbar-btn {
            padding: 8px 12px;
            border: none;
            background: transparent;
            border-radius: 4px;
            cursor: pointer;
            color: #5f6368;
            font-size: 13px;
        }

        .toolbar-btn:hover {
            background: #f1f3f4;
        }

        .tabs {
            display: flex;
            gap: 0;
        }

        .tab {
            padding: 12px 24px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            color: #5f6368;
            font-size: 14px;
            font-weight: 500;
        }

        .tab.active {
            color: #d93025;
            border-bottom-color: #d93025;
        }

        /* Email List */
        .email-list {
            flex: 1;
            overflow-y: auto;
            background: white;
        }

        .email-row {
            display: flex;
            align-items: flex-start;
            padding: 12px 20px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: box-shadow 0.2s;
            position: relative;
        }

        .email-row:hover {
            box-shadow: inset 1px 0 0 #dadce0, inset -1px 0 0 #dadce0, 0 1px 2px 0 rgba(60,64,67,.3), 0 1px 3px 1px rgba(60,64,67,.15);
            z-index: 1;
        }

        .email-row.unread {
            font-weight: 700;
        }

        .email-checkbox {
            margin-right: 16px;
            margin-top: 4px;
        }

        .sender-info {
            width: 200px;
            flex-shrink: 0;
            margin-right: 16px;
        }

        .sender-name {
            font-size: 14px;
            color: #202124;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .email-content {
            flex: 1;
            min-width: 0;
            margin-right: 16px;
        }

        .subject-preview {
            font-size: 14px;
            color: #202124;
            line-height: 1.4;
            margin-bottom: 8px;
        }

        .subject {
            font-weight: inherit;
        }

        .preview {
            color: #5f6368;
            font-weight: 400;
        }

        /* Enhanced Thread Indicators */
        .thread-indicators {
            display: flex;
            gap: 8px;
            margin-top: 8px;
            align-items: center;
        }

        .thread-segment {
            height: 6px;
            min-width: 32px;
            border-radius: 3px;
            cursor: pointer;
            position: relative;
            transition: all 0.2s ease;
        }

        .thread-segment:hover {
            transform: scaleY(1.5);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .thread-segment.regular {
            background-color: #1a73e8;
        }

        .thread-segment.pdf {
            background-color: #f9ab00;
        }

        .thread-segment.image {
            background-color: #34a853;
        }

        .thread-segment:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 1000;
            margin-bottom: 4px;
        }

        .email-meta {
            width: 120px;
            text-align: right;
            flex-shrink: 0;
            color: #5f6368;
            font-size: 13px;
        }

        .email-time {
            margin-bottom: 4px;
        }

        .thread-count-badge {
            background: #1a73e8;
            color: white;
            border-radius: 10px;
            padding: 2px 8px;
            font-size: 12px;
            font-weight: 500;
        }

        /* Thread View */
        .thread-view {
            display: none;
            flex-direction: column;
            height: 100%;
            background: white;
        }

        .thread-view.active {
            display: flex;
        }

        .thread-toolbar {
            padding: 12px 20px;
            border-bottom: 1px solid #dadce0;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .back-btn {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: #5f6368;
            padding: 8px;
            border-radius: 50%;
        }

        .back-btn:hover {
            background: #f1f3f4;
        }

        .thread-actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            background: none;
            border: none;
            padding: 8px;
            border-radius: 50%;
            cursor: pointer;
            color: #5f6368;
        }

        .action-btn:hover {
            background: #f1f3f4;
        }

        .thread-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .thread-header-info {
            margin-bottom: 24px;
        }

        .thread-subject {
            font-size: 22px;
            font-weight: 400;
            color: #202124;
            margin-bottom: 8px;
        }

        .thread-meta-info {
            color: #5f6368;
            font-size: 13px;
        }

        .message {
            margin-bottom: 20px;
            border: 1px solid #dadce0;
            border-radius: 8px;
            background: white;
        }

        .message-header {
            padding: 16px 20px;
            border-bottom: 1px solid #dadce0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .message-sender {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .sender-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #1a73e8;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
        }

        .sender-details {
            display: flex;
            flex-direction: column;
        }

        .sender-name-msg {
            font-weight: 500;
            color: #202124;
        }

        .sender-email {
            font-size: 12px;
            color: #5f6368;
        }

        .message-time {
            color: #5f6368;
            font-size: 13px;
        }

        .message-content {
            padding: 20px;
            line-height: 1.6;
            color: #202124;
        }

        .attachment-indicator {
            margin-top: 16px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 4px;
            border-left: 4px solid #34a853;
        }

        .attachment-indicator.pdf {
            border-left-color: #f9ab00;
        }

        .attachment-icon {
            display: inline-block;
            margin-right: 8px;
        }

        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Gmail Header -->
    <div class="gmail-header">
        <div class="gmail-logo">
            <svg width="24" height="24" viewBox="0 0 24 24">
                <path fill="#ea4335" d="M20 6L12 13L4 6V4L12 11L20 4Z"/>
                <path fill="#fbbc04" d="M20 6V18C20 19.1 19.1 20 18 20H6C4.9 20 4 19.1 4 18V6"/>
            </svg>
            <span style="font-size: 22px; color: #5f6368;">Gmail</span>
        </div>
        <div class="search-container">
            <input type="text" class="search-box" placeholder="Search mail">
        </div>
        <div class="user-controls">
            <div style="width: 32px; height: 32px; border-radius: 50%; background: #d93025; color: white; display: flex; align-items: center; justify-content: center; font-weight: 500;">H</div>
        </div>
    </div>

    <div class="main-layout">
        <!-- Sidebar -->
        <div class="sidebar">
            <button class="compose-btn">
                <span style="margin-right: 8px;"></span>Compose
            </button>
            <ul class="sidebar-menu">
                <li class="active"> Inbox <span class="count">7,985</span></li>
                <li>Starred</li>
                <li> Snoozed</li>
                <li> Sent</li>
                <li>Scheduled <span class="count">1</span></li>
                <li>Drafts <span class="count">15</span></li>
                <li>More</li>
            </ul>
        </div>

        <!-- Content Area -->
        <div class="content-area">
            <!-- Inbox View -->
            <div id="inboxView" class="inbox-view">
                <div class="inbox-header">
                    <h1 class="inbox-title">Inbox</h1>
                    <div class="toolbar">
                        <button class="toolbar-btn"></button>
                        <button class="toolbar-btn">More</button>
                    </div>
                    <div class="tabs">
                        <div class="tab active">Primary</div>
                        <div class="tab">Social</div>
                        <div class="tab">Promotions</div>
                        <div class="tab">Updates</div>
                    </div>
                </div>

                <div class="email-list" id="emailList">
                    <!-- Email rows will be generated here -->
                </div>
            </div>

            <!-- Thread View -->
            <div id="threadView" class="thread-view">
                <div class="thread-toolbar">
                    <button class="back-btn" onclick="closeThread()">‚Üê</button>
                    <div class="thread-actions">
                        <button class="action-btn">üóÉÔ∏è</button>
                        <button class="action-btn">üóëÔ∏è</button>
                        <button class="action-btn">üìß</button>
                        <button class="action-btn">‚ãÆ</button>
                    </div>
                </div>

                <div class="thread-messages" id="threadMessages">
                    <!-- Thread content will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced thread data
        const threadData = [
            {
                id: 'prof-kim-project',
                sender: 'Si Jung Kim',
                senderEmail: 'si.kim@university.edu',
                subject: 'Research Paper - Pilot Study Results',
                preview: 'Harshitha, please go ahead and run a pilot study with 5 - 10 people.',
                time: 'Mon 28 Jul, 10:02',
                unread: true,
                messages: [
                    {
                        type: 'regular',
                        sender: 'Si Jung Kim',
                        email: 'si.kim@university.edu',
                        time: 'Mon 28 Jul, 10:02 (6 days ago)',
                        content: 'Harshitha, please go ahead and run a pilot study with 5 - 10 people.',
                        avatar: 'SJ'
                    },
                    {
                        type: 'regular',
                        sender: 'Harshitha Iyer',
                        email: 'harshitha05m@gmail.com',
                        time: 'Mon 28 Jul, 18:36 (6 days ago)',
                        content: 'Okay, I will do that.',
                        avatar: 'H'
                    },
                    {
                        type: 'pdf',
                        sender: 'Harshitha Iyer',
                        email: 'harshitha05m@gmail.com',
                        time: 'Fri 1 Aug, 11:11 (2 days ago)',
                        content: 'Hi Prof. Kim, I hope you\'re doing well. I\'ve completed the pilot study and have attached it below for your review. If it looks good to you, I\'ll include it in my thesis.',
                        attachment: 'pilot_study_results.pdf',
                        avatar: 'H'
                    },
                    {
                        type: 'regular',
                        sender: 'Si Jung Kim',
                        email: 'si.kim@university.edu',
                        time: 'Fri 1 Aug, 11:20 (2 days ago)',
                        content: 'Hi Harshitha, great! Would you please share the pilot data with me? Sharing a link to the survey is fine. Just a heads-up‚Äîplease start thinking about and writing the literature review.',
                        avatar: 'SJ'
                    },
                    {
                        type: 'regular',
                        sender: 'Si Jung Kim',
                        email: 'si.kim@university.edu',
                        time: 'Fri 1 Aug, 11:30 (2 days ago)',
                        content: 'I quickly took a look at the survey data and it looks good. Can you get more than 30 responses? It is because of CLT that 30 has been chosen.',
                        avatar: 'SJ'
                    },
                    {
                        type: 'regular',
                        sender: 'Harshitha Iyer',
                        email: 'harshitha05m@gmail.com',
                        time: 'Fri 1 Aug, 11:30 (2 days ago)',
                        content: 'Thank you for the note. I\'m sharing the link to the pre-survey form below: https://docs.google.com/forms/d/e/1FAIpQLSegU7sZJcHeN1kugzH32HU2luNlJ3JEp9JVdDGqGBD121PvDA/viewform?usp=sharing&ouid=103643335020590926814',
                        avatar: 'H'
                    }
                ]
            },
            {
                id: 'sarah-marketing',
                sender: 'Sarah Chen',
                senderEmail: 'sarah.chen@company.com',
                subject: 'Q4 Marketing Campaign Assets',
                preview: 'Here are the final designs for the Q4 campaign. I\'ve included both the high-res images...',
                time: '9:45 AM',
                unread: false,
                messages: [
                    {
                        type: 'regular',
                        sender: 'Sarah Chen',
                        email: 'sarah.chen@company.com',
                        time: 'Today 9:45 AM',
                        content: 'Hi everyone! I\'m excited to share the final assets for our Q4 marketing campaign.',
                        avatar: 'SC'
                    },
                    {
                        type: 'image',
                        sender: 'Sarah Chen',
                        email: 'sarah.chen@company.com',
                        time: 'Today 9:46 AM',
                        content: 'Here are the hero images for the campaign. We have versions optimized for web, social media, and print.',
                        attachment: 'campaign_images.zip',
                        avatar: 'SC'
                    },
                    {
                        type: 'pdf',
                        sender: 'Sarah Chen',
                        email: 'sarah.chen@company.com',
                        time: 'Today 9:47 AM',
                        content: 'I\'ve also attached the complete campaign strategy document with timelines and budgets.',
                        attachment: 'Q4_campaign_strategy.pdf',
                        avatar: 'SC'
                    },
                    {
                        type: 'regular',
                        sender: 'Sarah Chen',
                        email: 'sarah.chen@company.com',
                        time: 'Today 9:48 AM',
                        content: 'Everything looks ready to go! Can we get final approval by tomorrow?',
                        avatar: 'SC'
                    }
                ]
            },
            {
                id: 'michael-legal',
                sender: 'Michael Rodriguez',
                senderEmail: 'michael.rodriguez@lawfirm.com',
                subject: 'Contract Review - Urgent Response Needed',
                preview: 'I\'ve reviewed the vendor agreement and have several concerns that need immediate attention...',
                time: 'Yesterday',
                unread: true,
                messages: [
                    {
                        type: 'regular',
                        sender: 'Michael Rodriguez',
                        email: 'michael.rodriguez@lawfirm.com',
                        time: 'Yesterday 4:30 PM',
                        content: 'I\'ve completed my review of the vendor agreement. There are several clauses that need revision before we can proceed.',
                        avatar: 'MR'
                    },
                    {
                        type: 'pdf',
                        sender: 'Michael Rodriguez',
                        email: 'michael.rodriguez@lawfirm.com',
                        time: 'Yesterday 4:32 PM',
                        content: 'Please find my detailed review comments attached. The liability and termination sections require significant changes.',
                        attachment: 'contract_review_comments.pdf',
                        avatar: 'MR'
                    },
                    {
                        type: 'regular',
                        sender: 'Michael Rodriguez',
                        email: 'michael.rodriguez@lawfirm.com',
                        time: 'Yesterday 4:35 PM',
                        content: 'Can we schedule a call tomorrow to discuss these changes? This is time-sensitive as the vendor is expecting a response by Friday.',
                        avatar: 'MR'
                    }
                ]
            },
            {
                id: 'jennifer-hr',
                sender: 'Jennifer Walsh',
                senderEmail: 'jennifer.walsh@company.com',
                subject: 'Team Building Event - Photo Gallery',
                preview: 'Thanks everyone for making last week\'s team building event such a success! Here are the photos...',
                time: '3 days ago',
                unread: false,
                messages: [
                    {
                        type: 'regular',
                        sender: 'Jennifer Walsh',
                        email: 'jennifer.walsh@company.com',
                        time: '3 days ago 2:15 PM',
                        content: 'Hi team! What an amazing day we had at the team building event. The energy was fantastic and everyone seemed to really enjoy themselves.',
                        avatar: 'JW'
                    },
                    {
                        type: 'image',
                        sender: 'Jennifer Walsh',
                        email: 'jennifer.walsh@company.com',
                        time: '3 days ago 2:20 PM',
                        content: 'I\'ve compiled all the photos from the event. There are some great shots of everyone participating in the activities!',
                        attachment: 'team_building_photos.zip',
                        avatar: 'JW'
                    },
                    {
                        type: 'regular',
                        sender: 'Jennifer Walsh',
                        email: 'jennifer.walsh@company.com',
                        time: '3 days ago 2:25 PM',
                        content: 'Based on the feedback forms, 95% of participants rated the event as excellent. We\'ll definitely be planning more events like this!',
                        avatar: 'JW'
                    },
                    {
                        type: 'pdf',
                        sender: 'Jennifer Walsh',
                        email: 'jennifer.walsh@company.com',
                        time: '3 days ago 2:30 PM',
                        content: 'I\'ve also attached the complete feedback summary report for those interested in the detailed results.',
                        attachment: 'event_feedback_report.pdf',
                        avatar: 'JW'
                    }
                ]
            },
            {
                id: 'david-finance',
                sender: 'David Kim',
                senderEmail: 'david.kim@company.com',
                subject: 'Q3 Budget Report & Q4 Projections',
                preview: 'Please find attached the Q3 financial summary and our preliminary Q4 budget projections...',
                time: 'Last week',
                unread: false,
                messages: [
                    {
                        type: 'regular',
                        sender: 'David Kim',
                        email: 'david.kim@company.com',
                        time: 'Last week 11:00 AM',
                        content: 'Good morning everyone. I\'m pleased to share that Q3 exceeded our revenue targets by 12%. Here\'s the breakdown.',
                        avatar: 'DK'
                    },
                    {
                        type: 'pdf',
                        sender: 'David Kim',
                        email: 'david.kim@company.com',
                        time: 'Last week 11:05 AM',
                        content: 'The detailed Q3 financial report shows strong performance across all departments, with particularly impressive results from sales and marketing.',
                        attachment: 'Q3_financial_report.pdf',
                        avatar: 'DK'
                    },
                    {
                        type: 'pdf',
                        sender: 'David Kim',
                        email: 'david.kim@company.com',
                        time: 'Last week 11:10 AM',
                        content: 'I\'ve also prepared preliminary Q4 projections based on current trends and pipeline data.',
                        attachment: 'Q4_budget_projections.pdf',
                        avatar: 'DK'
                    },
                    {
                        type: 'regular',
                        sender: 'David Kim',
                        email: 'david.kim@company.com',
                        time: 'Last week 11:15 AM',
                        content: 'Let\'s schedule department meetings next week to discuss Q4 budget allocations. Great work everyone!',
                        avatar: 'DK'
                    }
                ]
            },
            {
                id: 'alex-tech',
                sender: 'Alex Thompson',
                senderEmail: 'alex.thompson@company.com',
                subject: 'Server Migration Update - Critical Action Required',
                preview: 'The server migration is scheduled for this weekend. All team leads need to review the checklist...',
                time: '2 hours ago',
                unread: true,
                messages: [
                    {
                        type: 'regular',
                        sender: 'Alex Thompson',
                        email: 'alex.thompson@company.com',
                        time: '2 hours ago',
                        content: 'Team, the server migration is confirmed for this Saturday starting at 2 AM. We expect 6-8 hours of downtime.',
                        avatar: 'AT'
                    },
                    {
                        type: 'pdf',
                        sender: 'Alex Thompson',
                        email: 'alex.thompson@company.com',
                        time: '2 hours ago',
                        content: 'Please review the attached migration checklist and confirm your team\'s readiness by Friday 5 PM.',
                        attachment: 'server_migration_checklist.pdf',
                        avatar: 'AT'
                    },
                    {
                        type: 'regular',
                        sender: 'Alex Thompson',
                        email: 'alex.thompson@company.com',
                        time: '2 hours ago',
                        content: 'Customer support team: please update the status page and prepare communication templates for any issues.',
                        avatar: 'AT'
                    },
                    {
                        type: 'regular',
                        sender: 'Alex Thompson',
                        email: 'alex.thompson@company.com',
                        time: '1 hour ago',
                        content: 'I\'ll be available throughout the migration for any urgent issues. Let\'s make this transition seamless!',
                        avatar: 'AT'
                    }
                ]
            },
            {
                id: 'lisa-design',
                sender: 'Lisa Park',
                senderEmail: 'lisa.park@company.com',
                subject: 'Website Redesign - Final Mockups for Review',
                preview: 'After incorporating all the feedback, here are the final mockups for the website redesign...',
                time: 'Yesterday',
                unread: false,
                messages: [
                    {
                        type: 'regular',
                        sender: 'Lisa Park',
                        email: 'lisa.park@company.com',
                        time: 'Yesterday 1:20 PM',
                        content: 'Hi everyone! I\'ve incorporated all the feedback from last week\'s design review. The new mockups address all the concerns raised.',
                        avatar: 'LP'
                    },
                    {
                        type: 'image',
                        sender: 'Lisa Park',
                        email: 'lisa.park@company.com',
                        time: 'Yesterday 1:25 PM',
                        content: 'Here are the high-fidelity mockups for desktop, tablet, and mobile versions. The color scheme has been updated per marketing\'s request.',
                        attachment: 'website_mockups_final.zip',
                        avatar: 'LP'
                    },
                    {
                        type: 'pdf',
                        sender: 'Lisa Park',
                        email: 'lisa.park@company.com',
                        time: 'Yesterday 1:30 PM',
                        content: 'I\'ve also prepared a detailed design specification document that covers all the technical requirements for development.',
                        attachment: 'design_specifications.pdf',
                        avatar: 'LP'
                    },
                    {
                        type: 'regular',
                        sender: 'Lisa Park',
                        email: 'lisa.park@company.com',
                        time: 'Yesterday 1:35 PM',
                        content: 'The user testing results show a 40% improvement in task completion rates with the new design. Ready to move forward!',
                        avatar: 'LP'
                    }
                ]
            },
            {
                id: 'ryan-sales',
                sender: 'Ryan Mitchell',
                senderEmail: 'ryan.mitchell@company.com',
                subject: 'Client Presentation - Acme Corp Deal Update',
                preview: 'Great news! The presentation went extremely well. Acme Corp is ready to move forward with the full package...',
                time: '4 hours ago',
                unread: true,
                messages: [
                    {
                        type: 'regular',
                        sender: 'Ryan Mitchell',
                        email: 'ryan.mitchell@company.com',
                        time: '4 hours ago',
                        content: 'Fantastic news everyone! The Acme Corp presentation was a huge success. They loved our proposal and want to proceed immediately.',
                        avatar: 'RM'
                    },
                    {
                        type: 'regular',
                        sender: 'Ryan Mitchell',
                        email: 'ryan.mitchell@company.com',
                        time: '4 hours ago',
                        content: 'They\'re particularly excited about our AI integration features and the custom dashboard we designed for their specific needs.',
                        avatar: 'RM'
                    },
                    {
                        type: 'pdf',
                        sender: 'Ryan Mitchell',
                        email: 'ryan.mitchell@company.com',
                        time: '4 hours ago',
                        content: 'I\'ve attached the signed letter of intent. This deal is worth $2.3M over 3 years - our biggest client win this quarter!',
                        attachment: 'acme_corp_letter_of_intent.pdf',
                        avatar: 'RM'
                    },
                    {
                        type: 'image',
                        sender: 'Ryan Mitchell',
                        email: 'ryan.mitchell@company.com',
                        time: '3 hours ago',
                        content: 'Here\'s a photo from the signing ceremony. Their CEO was incredibly impressed with our team\'s professionalism.',
                        attachment: 'signing_ceremony_photo.jpg',
                        avatar: 'RM'
                    },
                    {
                        type: 'regular',
                        sender: 'Ryan Mitchell',
                        email: 'ryan.mitchell@company.com',
                        time: '3 hours ago',
                        content: 'Implementation starts next month. I\'ll coordinate with the project management team to ensure a smooth onboarding process.',
                        avatar: 'RM'
                    }
                ]
            }
        ];

        function generateEmailList() {
            const emailList = document.getElementById('emailList');
            emailList.innerHTML = '';

            threadData.forEach(thread => {
                const row = document.createElement('div');
                row.className = `email-row ${thread.unread ? 'unread' : ''}`;
                row.onclick = () => openThread(thread.id);

                // Generate thread segments
                let segments = '';
                thread.messages.forEach((message, index) => {
                    segments += `<div class="thread-segment ${message.type}" 
                                     data-tooltip="Message ${index + 1}: ${message.type === 'pdf' ? 'PDF attachment' : message.type === 'image' ? 'Image attachment' : 'Regular message'}"
                                     onclick="event.stopPropagation(); openSpecificMessage('${thread.id}', ${index})"></div>`;
                });

                row.innerHTML = `
                    <input type="checkbox" class="email-checkbox">
                    <div class="sender-info">
                        <div class="sender-name">${thread.sender}</div>
                    </div>
                    <div class="email-content">
                        <div class="subject-preview">
                            <span class="subject">${thread.subject}</span>
                            <span class="preview"> - ${thread.preview}</span>
                        </div>
                        <div class="thread-indicators">
                            ${segments}
                        </div>
                    </div>
                    <div class="email-meta">
                        <div class="email-time">${thread.time}</div>
                        <div class="thread-count-badge">${thread.messages.length}</div>
                    </div>
                `;

                emailList.appendChild(row);
            });
        }

        function openThread(threadId) {
            const thread = threadData.find(t => t.id === threadId);
            if (!thread) return;

            document.getElementById('inboxView').classList.add('hidden');
            document.getElementById('threadView').classList.add('active');

            displayThreadMessages(thread);
        }

        function openSpecificMessage(threadId, messageIndex) {
            const thread = threadData.find(t => t.id === threadId);
            if (!thread) return;

            document.getElementById('inboxView').classList.add('hidden');
            document.getElementById('threadView').classList.add('active');

            displayThreadMessages(thread, messageIndex);
        }

        function displayThreadMessages(thread, specificIndex = null) {
            const container = document.getElementById('threadMessages');
            container.innerHTML = '';

            // Thread header
            const headerDiv = document.createElement('div');
            headerDiv.className = 'thread-header-info';
            headerDiv.innerHTML = `
                <div class="thread-subject">${thread.subject}</div>
                <div class="thread-meta-info">${thread.messages.length} messages</div>
            `;
            container.appendChild(headerDiv);

            // Messages
            const messagesToShow = specificIndex !== null ? [thread.messages[specificIndex]] : thread.messages;
            
            messagesToShow.forEach((message, index) => {
                const actualIndex = specificIndex !== null ? specificIndex : index;
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message';

                let attachmentHtml = '';
                if (message.attachment) {
                    attachmentHtml = `
                        <div class="attachment-indicator ${message.type}">
                            <span class="attachment-icon">${message.type === 'pdf' ? 'üìÑ' : 'üñºÔ∏è'}</span>
                            <strong>Attachment:</strong> ${message.attachment}
                        </div>
                    `;
                }

                messageDiv.innerHTML = `
                    <div class="message-header">
                        <div class="message-sender">
                            <div class="sender-avatar">${message.avatar}</div>
                            <div class="sender-details">
                                <div class="sender-name-msg">${message.sender}</div>
                                <div class="sender-email">&lt;${message.email}&gt;</div>
                            </div>
                        </div>
                        <div class="message-time">${message.time}</div>
                    </div>
                    <div class="message-content">
                        ${message.content}
                        ${attachmentHtml}
                    </div>
                `;

                container.appendChild(messageDiv);
            });
        }

        function closeThread() {
            document.getElementById('threadView').classList.remove('active');
            document.getElementById('inboxView').classList.remove('hidden');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            generateEmailList();
        });
    </script>
</body>
</html>